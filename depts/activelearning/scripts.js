const data = [
    {
      "name": "Think it through",
      "description": "Thinking it through - or rather thinking through it - can be thought of as a vertical dimension. It involves not stopping on the surface. Suppose I look up a solution.  I can read it and \"right, of course.\" Or I can make myself actually work through the steps, draw the diagram, label the forces, etc.  I can redo the computations. \"Going over the solution\" can involve more or less go through the solution.",
      "subcomponents": [
        { 
            "name": "Invoke the generation effect",
            "description": "The generation effect posits that self-generated information is better remembered than passively received information. In the classroom, having students generate answers, create examples, or teach others encourages them to actively engage with the material, leading to better understanding and retention.", 
            "url": "https://www.youtube.com/embed/mebo9elw7RI",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=generation%20effect"
        },
        { 
            "name": "Use desirable difficulty", 
            "description": "Desirable difficulty is the concept that optimal learning occurs when tasks are challenging but achievable. In the classroom, providing tasks that push students just beyond their comfort zone can lead to greater cognitive effort and engagement, which in turn fosters better long-term retention and transfer of skills.",
            "url": "https://www.youtube.com/embed/XPllm-gtrMM",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=desirable%20difficulty"
        },
        { 
            "name": "Evoke deep processing", 
            "description": "Deep processing refers to engaging with information at a meaningful level, rather than focusing on superficial aspects. In the classroom, encouraging students to analyze, synthesize, and make connections between ideas promotes deeper understanding and more durable memories, as opposed to rote memorization.",
            "url": "https://www.youtube.com/embed/6RATeMlmfi8",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=deep%20processing"
        },
        { 
            "name": "Engage in deliberate practice", 
            "description": "Deliberate practice involves focused, goal-oriented practice with immediate feedback, targeting specific areas of improvement. In the classroom, providing structured practice opportunities, clear objectives, and tailored feedback helps students refine their skills, accelerate learning, and achieve mastery more efficiently.",
            "url": "https://www.youtube.com/embed/jFvZoQGjEi8",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=deliberate%20practice"
        },
        { 
            "name": "Use interleaving", 
            "description": "Interleaving is the practice of mixing different topics or problem types within a single study session, as opposed to blocking (studying one topic at a time). In the classroom, interleaving promotes cognitive flexibility, strengthens connections between related concepts, and enhances long-term retention by requiring students to actively retrieve and apply knowledge in varied contexts.",
            "url": "https://www.youtube.com/embed/WbDpYMp8F6o",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=interleaving"
        },
        { 
            "name": "Meaningful Milestones", 
            "description": "Meaningful milestones are clear, achievable goals that provide a sense of progress and help learners monitor their own development. In the classroom, breaking down larger tasks or learning objectives into smaller, manageable steps gives students a roadmap for success and boosts motivation through a sense of accomplishment.",
            "url": "https://www.youtube.com/embed/hH7w-Fwa_uU",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=meaningful%20milestones"
        },
        { 
            "name": "Induce dual coding", 
            "description": "Dual coding theory posits that combining verbal and visual information can enhance learning by creating multiple mental representations of the material. In the classroom, using text, images, diagrams, or other visual aids alongside verbal explanations can help students process and retain information more effectively by appealing to different cognitive channels.",
            "url": "https://www.youtube.com/embed/mZyfJh-s4-8",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=dual%20coding"
        },
        { 
            "name": "Evoke emotion", 
            "description": "Emotionally-charged learning experiences are more memorable and engaging. In the classroom, creating emotional connections with the material (through storytelling, humor, or personal relevance) can heighten students' interest and make the content more salient, leading to stronger memory formation and deeper understanding.",
            "url": "https://www.youtube.com/embed/RViuTHBIOq8",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=evoke%20emotion"
        }
      ],
    },
    {
      "name": "Make and use associations",
      "description": "The second maxim is about building a horizontal scaffolding system for learning. We make connections across. The horizontal dimension captures the repetition, similarity, and difference.",
      "subcomponents": [
        { 
            "name": "Promote chunking", 
            "description": "Chunking is the cognitive strategy of organizing information into smaller, more manageable units, making it easier to process and remember. In the classroom, structuring content into meaningful chunks or groups (e.g., categories, hierarchies, or patterns) can facilitate learning by reducing cognitive load and helping students recognize relationships among concepts.",
            "url": "https://www.youtube.com/embed/9VzJk5GF8sM",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=promote%20chunking"
        },
        { 
            "name": "Build on prior associations", 
            "description": "Building on prior associations involves connecting new information to students' existing knowledge, which creates a foundation for integrating and retaining new concepts. In the classroom, drawing on students' prior knowledge or experiences can enhance learning by providing a meaningful context for understanding new material.",
            "url": "https://www.youtube.com/embed/_uMVDl1V2Q4",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=prior%20associations"
        },
        { 
            "name": "Present foundational material first", 
            "description": "Presenting foundational material first ensures that students acquire the fundamental concepts and skills required for more complex learning. In the classroom, scaffolding lessons in a sequential manner helps students build a solid foundation, promoting deeper understanding and preventing gaps in knowledge.",
            "url": "https://www.youtube.com/embed/5q5oDEoO1qo",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=foundational%20first"
        },
        { 
            "name": "Exploit appropriate examples", 
            "description": "Appropriate examples are those that are relevant, engaging, and representative of the concept being taught. In the classroom, using such examples can clarify abstract ideas, make connections to real-world situations, and increase students' motivation and interest in the material.",
            "url": "https://www.youtube.com/embed/DGTB-mA1w7U",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=appropriate%20examples"
        },
        { 
            "name": "Rely on principles, not rote", 
            "description": "Focusing on principles emphasizes understanding the underlying logic and structure of concepts, rather than merely memorizing facts. In the classroom, fostering problem-solving and critical thinking skills can promote deeper learning and equip students with the ability to transfer knowledge to novel situations.",
            "url": "https://www.youtube.com/embed/IIwgPOzHWpk",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=principles%20not%20rote"
        },
        { 
            "name": "Create rich retrieval cues", 
            "description": "Rich retrieval cues are multiple, diverse cues that facilitate recall of information by activating various memory associations. In the classroom, incorporating mnemonic devices, visual aids, or other memory-enhancing techniques can improve students' ability to retrieve and retain information.",
            "url": "https://www.youtube.com/embed/aUmApJMfUTc",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=rich%20retrieval%20cues"
        },
        { 
            "name": "Create associative chaining (a.k.a using storytelling)", 
            "description": "Associative chaining involves connecting ideas through narrative or logical sequences, which can help learners integrate and remember information more effectively. In the classroom, using stories, analogies, or other narrative devices can enhance comprehension and retention by organizing content in a meaningful and memorable way.",
            "url": "https://www.youtube.com/embed/uJfGby1C3C4",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=associative%20chaining"
        },
        { 
            "name": "Using spaced practice", 
            "description": "Spaced practice involves distributing learning over time, as opposed to massed practice (cramming). In the classroom, revisiting concepts at regular intervals can reinforce learning, promote long-term retention, and prevent the forgetting curve from taking effect.",
            "url": "https://www.youtube.com/embed/3WJYp98eys8",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=spaced%20practice"
        },
        { 
            "name": "Establish connections with different contexts", 
            "description": "Connecting concepts to various contexts fosters a more robust understanding and improves transfer of knowledge. In the classroom, exploring interdisciplinary connections, real-world applications, or diverse examples can enrich students' understanding of the material and demonstrate its broader relevance.",
            "url": "https://www.youtube.com/embed/vmjP6LjGaag",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=connections%20across%20contexts"
        },
        { 
            "name": "Avoid forward and backward interference", 
            "description": "Forward and backward interference occur when new learning interferes with previously learned information or vice versa. In the classroom, carefully sequencing lessons, minimizing overlap, and providing opportunities for review can help mitigate interference and enhance long-term retention.",
            "url": "https://www.youtube.com/embed/FJWadZiC0SI",
            "bib": "https://innoeduvation.org/313/applets/zotero/index-20230515.html?groups=4573990&tag=avoid forward%20and%20backward%20interference"
        }
      ],
    }
  ];
  
  function createCard(level, name, description, url, bib) {
    console.log(`createCard(${level}, ${name}, ${description},${url})`)
    const card = document.createElement("div")
    card.className = "card";
    card.dataset.level = level;

    const cardInner = document.createElement("div");
    cardInner.className = "card-inner";   
  
    const front = document.createElement("div");
    front.className = "card-front";
    front.innerHTML = `<p><strong>${name}</strong></p>`;
  
    const back = document.createElement("div");
    back.className = "card-back"; // Add 'card-back' class
    back.innerHTML = `<p><strong>${name}: </strong><span class="description">${description}</span></p>`;

    console.log(front, back);

    let moreButton;

    if (level < 2) {
        console.log('trying to create button')
      moreButton = document.createElement("button");
      moreButton.className = "more-button";
      moreButton.textContent = "More";
      console.log('appending')
      back.appendChild(moreButton);
    }
    front.addEventListener("click", () => {
      card.classList.toggle("card-flip");
      
    }); 

    cardInner.appendChild(front);
    cardInner.appendChild(back);
    card.appendChild(cardInner);
  console.log(card)


  
    if (moreButton) {
        console.log('processing more button')
        moreButton.addEventListener("click", (e) => {
        //moreButton.addEventListener("touchend", (e) => {
            e.stopPropagation();
          if (level === 0) {
            const topLevelComponent = data.find((item) => item.name === name);
            if (topLevelComponent && topLevelComponent.subcomponents) {
              populateZone(topLevelComponent.subcomponents, 1);
            }
          } 
          else if (level === 1) {     
            const iframeContainer = document.getElementById("iframe-container");
            console.log(iframeContainer);
            if (iframeContainer) {console.log('iframecontainer')};
            let iframeVid = document.getElementById("iframeVid");
            let iframeBib = document.getElementById("iframeBib");

            if (iframeVid) {
                iframeVid.src = url; // Update the iframe src property if it already exists
            } 
            else { // level 2
                console.log('creating iframes', url)
                iframeVid = document.createElement("iframe");
                iframeVid.id = "iframeVid";
                iframeVid.width = "375";
                iframeVid.height = "210";
                iframeVid.title = "YouTube video player";
                iframeVid.frameBorder = "0";
                iframeVid.allow = "autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
                iframeVid.allowFullscreen = true;
                iframeVid.src = url

                iframeContainer.appendChild(iframeVid);
            }
            if (iframeBib) {
                iframeBib.src = bib; // Update the iframe src property if it already exists
            } 
            else { // level 2
                console.log('creating bib iframe', bib)
                iframeBib = document.createElement("iframe");
                iframeBib.id = "iframeBib";
                iframeBib.width = "600";
                iframeBib.height = "210";
                iframeBib.title = "Zotero Bibliography";
                iframeBib.frameBorder = "0";
                iframeBib.src = bib

                iframeContainer.appendChild(iframeBib);
            }
        }
        });
      }
      console.log("Card created:", card);
      return card;
  }



  
  function populateZone(items, level) {
    const zone = document.getElementById(level === 0 ? "top-zone" : "middle-zone");
    zone.innerHTML = "";
    items.forEach((item) => {
      console.log(`Processing ${item.name}`)
      const url = level === 1 ? item.url : null;
      const bib = level === 1 ? item.bib : null;
      const card = createCard(level, item.name, item.description, url, bib);
      console.log('about to append card', card)
      zone.appendChild(card);
    });
  }
  
  populateZone(data, 0);
  